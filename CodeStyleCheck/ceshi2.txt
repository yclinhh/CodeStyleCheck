#include <iostream>
#include<cstdlib>
#include<string>
#include<cstring>
using namespace std;

/*vmdknbdlb*/
/*dvddddddddddddddddddddddddddddd*/




typedef struct list{                        ///
int data;                                     //kvndknvikdnbvksdnbdkvi百度v本地v但是看到v肯定是你
string name;
struct list*next;
}Node;
Node*creat()
{
                                Node*head,*p,*q;
    int num;
    string n;
    head=new Node;

    cin>>num>>n;
    if(num==-1)
     {
         head->next=NULL;
         return head;
     }
    else
    {
        p=head;
        while(num!=-1)
        {
            q=new Node;
            q->data=num;
            q->name=n;
            p->next=q;
            p=q;
            cin>>num>>n;
        }
        p->next=NULL;
    }
    delete p;
    return head;
}
int*same(Node*head1,Node*head2,int*aa)
{
    Node*p,*q;
    p=head1->next;
    q=head2->next;
    int i=0;
    while(p)
    {
        while(q)
        {
            if(q->data==p->data)
            {
                aa[i++]=q->data;
            }
			q=q->next;
        }
		p=p->next;
		q=head2->next;
    }
    return aa;
}
Node *shanchu(Node*head,int *aa)
{
    Node*p=head->next,*q=head;

    int i=0,flag=0;
    while(p)
    {
        flag=0;
        for(i=0;aa[i]!='\0';i++)
        {
            if(p->data==aa[i])
            {
                q->next=p->next;
                p=q->next;
               flag=1;
                break;
            }
        }
        if(flag==0)
        {
            p=p->next;
            q=q->next;
        }
    }
    return head;
}
void show(Node*head)
{
    Node*p;
    p=head->next;
    while(p)
    {
        cout<<p->data<<" "<<p->name<<" ";
        p=p->next;
    }
}
int main()
{
    Node*head1,*head2;
    head1=creat();
   head2=creat();
   cout<<"list a:";
   show(head1);
   cout<<endl<<"list b:";
   show(head2);
  int *aa;
    aa=(int*)malloc(100*sizeof(int));
    aa=same(head1,head2,aa);
    head1=shanchu(head1,aa);
    head2=shanchu(head2,aa);
    cout<<endl<<"result a:";
     show(head1);
     cout<<endl<<"result b:";
     show(head2);

    return 0;
}
